test_kind: js_test

selector:
  roots:
  - jstests/aggregation/**/*.js
  exclude_files:
  - jstests/aggregation/extras/*.js
  - jstests/aggregation/data/*.js
  # NEED TO INVESTIGATE
#  - jstests/aggregation/bugs/server37750.js
#  - jstests/aggregation/bugs/server42756.js
#  - jstests/aggregation/optimize_away_pipeline.js
#  - jstests/aggregation/pipeline_pass_through_from_mongos.js
#  - jstests/aggregation/sharded_agg_cleanup_on_error.js
#  - jstests/aggregation/sources/indexStats/verify_index_stats_output.js
#  - jstests/aggregation/sources/lookup/profile_lookup.js
#  - jstests/aggregation/sources/merge/batch_writes.js
#  - jstests/aggregation/sources/merge/exchange_explain.js
#  - jstests/aggregation/sources/merge/use_cases.js
  exclude_with_any_tags:
  - assumes_superuser_permissions
  - requires_eval_command
  - requires_spawning_own_processes
  - uses_multiple_connections
  - uses_testing_only_commands
  - requires_sharding

executor:
  config:
    shell_options:
      readMode: commands
      ssl: ''
